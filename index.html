<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profit Margin Calculator</title>
<link rel="icon" type="image/x-icon" href="https://icons.duckduckgo.com/ip2/www.thecalculatorsite.com.ico">
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
  label { display: block; margin-top: 10px; }
  input, select { margin-top: 5px; padding: 5px; width: 150px; }
  .result { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>
<h2>Profit Margin Calculator</h2>

<label>Wholesale Cost ($):
  <input type="number" id="cost" step="1" min="0" value="1250">
  <select id="costUnit">
    <option value="g">per g</option>
    <option value="2g">per 2g</option>
    <option value="oz" selected>per oz</option>
  </select>
</label>

<label>Bucket Size:
  <select id="size">
    <option value="1" selected>1g</option>
    <option value="2">2g</option>
    <option value="3.5">3.5g</option>
    <option value="7">7g</option>
  </select>
</label>

<label id="retailLabel">Retail Price per <span id="bucketSizeLabel">1</span>g Bucket ($):
  <input type="number" id="retail" step="1" min="0" value="65">
</label>

<div class="result" id="result"></div>

<script>
const costInput = document.getElementById('cost');
const costUnit = document.getElementById('costUnit');
const sizeSelect = document.getElementById('size');
const retailInput = document.getElementById('retail');
const resultDiv = document.getElementById('result');
const bucketSizeLabel = document.getElementById('bucketSizeLabel');

const inputs = [costInput, costUnit, sizeSelect, retailInput];

function toPerGram(value, unit) {
  if (unit === 'g') return value;
  if (unit === '2g') return value / 2;
  if (unit === 'oz') return value / 28;
  return value;
}

function getTotalUnits(unitSize) {
  let grams;
  const costUnitValue = costUnit.value;
  if (costUnitValue === 'g') grams = 1;
  else if (costUnitValue === '2g') grams = 2;
  else if (costUnitValue === 'oz') grams = 28;
  else grams = 1;

  return grams / unitSize; // number of buckets
}

function updateProfit() {
  const costPerGram = toPerGram(parseFloat(costInput.value), costUnit.value);
  const bucketSize = parseFloat(sizeSelect.value);
  const retailPerBucket = parseFloat(retailInput.value);

  const costPerBucket = costPerGram * bucketSize;
  const profitPerBucket = retailPerBucket - costPerBucket;
  const marginPercent = (profitPerBucket / retailPerBucket) * 100;

  const totalBuckets = getTotalUnits(bucketSize);
  const totalProfit = profitPerBucket * totalBuckets;

  // Update label dynamically
  bucketSizeLabel.textContent = bucketSize;

  resultDiv.innerHTML = `
    Cost per g: $${costPerGram.toFixed(2)}<br>
    Profit per ${bucketSize}g: $${profitPerBucket.toFixed(2)}<br>
    Profit Margin: ${marginPercent.toFixed(2)}%<br>
    Total Profit: $${totalProfit.toFixed(2)}
  `;
}

// Live update
inputs.forEach(input => input.addEventListener('input', updateProfit));
updateProfit();
</script>
</body>
</html>
