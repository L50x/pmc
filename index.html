<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Profit Margin Calculator</title>
<link rel="icon" type="image/x-icon" href="https://icons.duckduckgo.com/ip2/www.thecalculatorsite.com.ico">
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
  label { display: block; margin-top: 10px; }
  input, select { margin-top: 5px; padding: 5px; width: 150px; }
  .result { margin-top: 20px; font-weight: bold; }
</style>
</head>
<body>
<h2>Profit Margin Calculator</h2>

<label>Wholesale Cost ($):
  <input type="number" id="cost" step="1" min="0" value="1250">
  <select id="costUnit">
    <option value="g">per g</option>
    <option value="2g">per 2g</option>
    <option value="oz" selected>per oz</option>
  </select>
</label>

<label>Bucket Size:
  <select id="size">
    <option value="1" selected>1g</option>
    <option value="2">2g</option>
    <option value="3.5">3.5g</option>
    <option value="7">7g</option>
  </select>
</label>

<label id="retailLabel">Retail Price per <span id="bucketSizeLabel">1</span>g Bucket ($):
  <input type="number" id="retail" step="1" min="0" value="65">
</label>

<div class="result" id="result"></div>

<script>
const costInput = document.getElementById('cost');
const costUnit = document.getElementById('costUnit');
const sizeSelect = document.getElementById('size');
const retailInput = document.getElementById('retail');
const resultDiv = document.getElementById('result');
const bucketSizeLabel = document.getElementById('bucketSizeLabel');

const inputs = [costInput, costUnit, sizeSelect, retailInput];

// Convert wholesale cost input to per-gram equivalent
function toPerGram(value, unit) {
  if (unit === 'oz') return value / 28;   // already per oz
  if (unit === '2g') return (value * (28 / 2)) / 28; // convert 2g -> oz -> g equivalent
  if (unit === 'g') return (value * (28 / 1)) / 28;  // convert 1g -> oz -> g equivalent
  return value;
}

// Calculate total number of buckets from one oz
function getTotalUnits(unitSize) {
  const gramsPerOz = 28;
  return gramsPerOz / unitSize;
}

function updateProfit() {
  const costValue = parseFloat(costInput.value);
  const costUnitValue = costUnit.value;
  const bucketSize = parseFloat(sizeSelect.value);
  const retailPerBucket = parseFloat(retailInput.value);

  // Adjust wholesale cost to per-oz equivalent when user enters per g or per 2g
  let costPerOz;
  if (costUnitValue === 'oz') {
    costPerOz = costValue;
  } else if (costUnitValue === '2g') {
    costPerOz = costValue * (28 / 2);
  } else if (costUnitValue === 'g') {
    costPerOz = costValue * 28;
  } else {
    costPerOz = costValue;
  }

  const costPerGram = costPerOz / 28;
  const costPerBucket = costPerGram * bucketSize;
  const profitPerBucket = retailPerBucket - costPerBucket;
  const marginPercent = (profitPerBucket / retailPerBucket) * 100;

  const totalBuckets = getTotalUnits(bucketSize);
  const totalProfit = profitPerBucket * totalBuckets;

  bucketSizeLabel.textContent = bucketSize;

  resultDiv.innerHTML = `
    Cost per oz: $${costPerOz.toFixed(2)}<br>
    Cost per g: $${costPerGram.toFixed(2)}<br>
    Profit per ${bucketSize}g: $${profitPerBucket.toFixed(2)}<br>
    Profit Margin: ${marginPercent.toFixed(2)}%<br>
    Total Profit (per oz): $${totalProfit.toFixed(2)}
  `;
}

inputs.forEach(input => input.addEventListener('input', updateProfit));
updateProfit();
</script>
</body>
</html>
